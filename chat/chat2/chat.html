<!DOCTYPE html>
<html>
<head>
  <title>Chat with {{ other_user.username }}</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    .chat-box { border: 1px solid #ccc; padding: 10px; height: 400px; overflow-y: scroll; }
    .message { margin: 5px; padding: 8px 12px; border-radius: 10px; display: inline-block; }
    .sent { background: #d1ffd1; float: right; clear: both; }
    .received { background: #f0f0f0; float: left; clear: both; }
    .input-box { margin-top: 10px; }
  </style>
</head>
<body>
  <h2>Chat with {{ other_user.username }}</h2>

  <div class="chat-box">
    {% for msg in messages %}
      {% if msg.sender_id == current_user.id %}
        <div class="message sent">{{ msg.text }} <small>{{ msg.timestamp.strftime('%H:%M') }}</small></div>
      {% else %}
        <div class="message received">{{ msg.text }} <small>{{ msg.timestamp.strftime('%H:%M') }}</small></div>
      {% endif %}
    {% endfor %}
  </div>

  <form method="POST" class="input-box">
    <input type="text" name="text" placeholder="Type a message..." required style="width:80%">
    <button type="submit">Send</button>
  </form>
</body>
</html>
