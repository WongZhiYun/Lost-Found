<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name = "viewport" content ="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='base.css') }}">
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
        <title>Home</title>
    </head>
    <body>
        <!-- Flash messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                <div class="alert alert-{{ category }}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
        {% endwith %}
        <!-- End flash messages -->
         
        <!--Navbar-->
        <header>
            <div>
                <nav class = "navbar">
                    <a href="/" class="logo">
                        <img src="{{ url_for('static', filename='images/logo 1.png') }}" alt="logo">
                        <h2>Lost And Found</h2>
                    </a>
                    <ul class="links">
                        <li><a href="{{ url_for('views.home') }}">Home</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#Services">Services</a></li>
                        {% if current_user.is_authenticated %}
                        <!-- ONLY show if the user is logged in -->
                        <li><a href="{{ url_for('views.feed') }}">Post Board</a></li>
                        {% endif %}
                    </ul>
                    <i class='bx bxs-user' onclick="toggleMenu()"></i>

                    <!--Accound dropdown-->
                    <div class="acc-wrap" id="accMenu">
                        <div class="acc">
                            <div class="acc-menu">
                                <i class='bx bxs-user'></i>
                                {% if current_user.is_authenticated%}
                                    <h2>{{ current_user.username}}</h2>
                                {% else%}
                                    <h2>Account</h2> 
                                {% endif %}
                            </div>
                            <hr>

                            {% if current_user.is_authenticated %}
                                <a href="{{ url_for('views.profile') }}" class="acc-menu-link">
                                    <i class='bx bxs-user-detail'></i>
                                    <p>User Profile</p>
                                </a>
                                <a href="{{ url_for('views.edit_profile') }}" class="acc-menu-link">
                                    <i class='bx bxs-edit'></i>
                                    <p>Edit Profile</p>
                                </a>
                                <a href="{{ url_for('auth.logout') }}" class="acc-menu-link">
                                    <i class='bx bxs-log-out'></i>
                                    <p>Logout</p>
                                </a>
                            {% else %}
                                <a href="{{ url_for('auth.login') }}" class="acc-menu-link">
                                    <i class='bx bxs-log-in'></i>
                                    <p>Login</p>
                                </a>
                                <a href="{{ url_for('auth.sign_up') }}" class="acc-menu-link">
                                    <i class='bx bxs-user-account'></i>
                                    <p>Create Account</p>
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Main Page Content -->
        {% block content %}{% endblock %}

        <script>
            let accMenu = document.getElementById("accMenu");

            function toggleMenu(){
                accMenu.classList.toggle("open-menu");
            }
        </script>
    </body>
</html>